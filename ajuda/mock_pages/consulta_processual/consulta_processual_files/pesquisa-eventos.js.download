//grade de eventos
$(document).ready(function() {
    $("#txtPesquisaEventos").keyup(function () {
        const searchTerm = $("#txtPesquisaEventos").val();
        const escapedTerm = searchTerm.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        const searchSplit = escapedTerm.replace(/ /g, "'):containsi('")

        $.extend($.expr[':'], {'containsi': function(elem, i, match, array){

            if(match[3] == undefined){
                match[3] = "";
            }

            let expression = match[3].toLowerCase()
                                        .replace('a', '[aáàãâä]')
                                        .replace('e', '[eêéèë]')
                                        .replace('i', '[iíìîï]')
                                        .replace('o', '[oóòõôö]')
                                        .replace('u', '[uúùûü]');

                return (elem.textContent || elem.innerText || '').toLowerCase().search( expression ) >= 0;
            }
        });

        $(".results > tbody > tr").not(":containsi('" + searchSplit + "')").each(function(e){
            $(this).attr('visible','false');
            $(this).find('input[type="checkbox"]').prop('disabled', true);
        });

        $(".results > tbody > tr:containsi('" + searchSplit + "')").each(function(e){
            $(this).attr('visible','true');
            $(this).find('input[type="checkbox"]').prop('disabled', false);
        });

        var jobCount = $('.results > tbody > tr[visible="true"]').length;
        $('.counter').text(jobCount + ' item');

        if(jobCount == '0') {$('.no-result').show();}
        else {$('.no-result').hide();}
    });
});