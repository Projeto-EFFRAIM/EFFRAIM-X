(function () {
    $(document).ready(function () {
        if (isPaginaResultadoPesquisaRapida()) return;
        $(document.body).on('click', analisarEventoClique);
    });
    function isPaginaResultadoPesquisaRapida() {
        return (/^\?acao=processo_pesquisa_rapida\&/.test(location.search));
    }

    function analisarEventoClique(evento) {
        var elementoClicado = evento.target;
        if (deveAbrirEmNovaAbaOuJanela(elementoClicado)) {
            evento.preventDefault();
            abrirEmNovaAbaOuJanela(elementoClicado);
        }
    }

    function deveAbrirEmNovaAbaOuJanela(el) {

        if (isLinkRelevantes(el)
            || !isLinkProcesso(el)
            || isBotaoPaginacao(el)
            || isLinkComTarget(el)
            || isLinkAncora(el)
        ) {
            return false;
        } else {
            return true;
        }
    };

    function abrirEmNovaAbaOuJanela(link) {
        window.open(link.href);
    }

    function isLinkRelevantes(el) {
        return /(^\?|\&)hdnMostrarSoRelevantes=(true|false)(\&|$)/.test($(el).prop('search'));
    }

    function isLinkProcesso(el) {
        return /(^\?|\&)acao=processo_selecionar(\&|$)/.test($(el).prop('search'))
            && /(^\?|\&)num_processo=\d{20}(\&|$)/.test($(el).prop('search'));
    }

    function isBotaoPaginacao(el) {
        return /(^\?|\&)pagina/.test($(el).prop('search'));
    }

    function isLinkComTarget(el) {
        return $(el).data('toggle') !== undefined;
    }

    function isLinkAncora(el) {
        if($(el).attr("href") === undefined){
            return false;
        }
        return $(el).attr("href").charAt(0) === "#";
    }

})();
