"use strict";(self.webpackChunkeproc=self.webpackChunkeproc||[]).push([[4312],{24312:(e,a,t)=>{t.d(a,{A:()=>m});var n=t(21588),o=t(15894),r=["initComplete"],i=["initComplete"];function l(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==a.indexOf(n))continue;t[n]=e[n]}return t}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],-1===a.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=t(2543),c=()=>{};function d(e,a,t,o,r,i,l,s){return{url:a,acao:e,data:[],class:t,label:o,tipo:i=void 0===i?n.A.NORMAL:i,title:r,name:t,id:t,icon:l=void 0===l?"error":l,MD:s=void 0===s||s,width:1200,height:700}}var u=e=>e+"_info-badge";function p(e,a,t,n){var o=$("#".concat(e)).DataTable(),r=u(e),i=a.tableTitle?'\n              <h2 class="d-flex float-left align-items-center">\n                  <span>'.concat(a.tableTitle,'</span>\n                  <span \n                      id="').concat(r,'"\n                      data-toggle="tooltip"\n                      tabindex="0"\n                      class="ml-1 mr-2 badge badge-pill text-secondary px-1 font-weight-normal">\n                  </span>\n              </h2>\n            '):"";$(o.table().node()).parents(".dataTables_wrapper").find(".container-acoes-bloco").prepend(i),$("#".concat(r)).tooltip({title:()=>{var a;return null===(a=document.getElementById("".concat(e,"_info")))||void 0===a?void 0:a.innerText}})}function f(e,a,t,n){var o=u(e),r=document.getElementById(o);r&&(r.style.display=!a&&t?"none":"",r.innerHTML="(".concat(n.fnRecordsDisplay(),")"))}const m={createAcaoConsultar:function(e,a,t){return d(e,a,"btnConsultar","Consultar","Consultar",t,"find_in_page",!0)},createAcaoAlterar:function(e,a,t){return d(e,a,"btnAlterar","Alterar","Alterar",t,"edit",!0)},createAcaoDesativar:function(e,a,t){return d(e,a,"btnDesativar","Desativar","Desativar",t,"delete",!0)},createAcao:d,build:function(e){var a,t,n,r=e,d=e.ajaxData.idFormParams,u=e.tableId,m=$("#"+u),h=e.onSelectCallback||c,b=e.otherDTAttributes||{},{initComplete:v}=b,g=l(b,i),w=v||c,C=e.allColumns||[],A=e.isResponsivoComDetalhe,T=e.buttons,x=e.drawCallbacks,k=m.data("url"),y=null!==(a=g.deferLoading)&&void 0!==a&&a,I=null!==(t=e.keepInCookie)&&void 0!==t&&t,_=null!==(n=e.keepInCookieName)&&void 0!==n?n:"",D=!y,O={url:k,type:"POST",data:function(a){e.ajaxData.acoes&&(a.dt_acoes=e.ajaxData.acoes),e.ajaxData.paramsComuns&&(a.dt_paramsComunsAcoes=e.ajaxData.paramsComuns),e.ajaxData.customColumns&&(a.dt_customColumns=e.ajaxData.customColumns),$.fn.dataTable.montarData(a,$("#".concat(d)))},error:function(e,a,t){function n(e,a,t){var n=$($.parseXML(e)).find(a),o=[];return n.each((function(){o.push($(this).find(t).attr("descricao").infraReplaceAll("\\n","<br>"))})),o}var o=n(e.responseText,"erros","erro"),r=n(e.responseText,"warnings","warning");$("#".concat(u,"_processing")).hide(),o.length>0&&eproc.toast.error({text:o.join("<br>"),data:{delay:5e3}}),r.length>0&&eproc.toast.warning({text:r.join("<br>"),data:{delay:5e3}})}},j=e.columns?e.columns:[],L=0;e.isSelecionavel&&(L++,j=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.unshift({data:"col_checkbox",title:'<input type="checkbox" name="chkTodos">',orderable:!1,className:"text-center not-export-col",width:"15px",render:function(e,t,n,o){return""!==a?'<input type=checkbox class="chkRowDataTable" id="'+a+"_"+n.DT_RowId+'" name="'+a+'[]" value="'+n.DT_RowId+'">':'<input type=checkbox class="chkRowDataTable" name="chkRow_'+n.DT_RowId+'">'}}),e}(j,e.nameSelecionavel)),e.isResponsivoComDetalhe&&(L++,j=function(e){return e.unshift({data:"col_detalhes",title:"",orderable:!1,className:"dtr-control text-center not-export-col",width:"15px"}),e}(j)),e.colunaAcoes&&(j=function(a){var t={data:"col_acoes",title:"Ações",orderable:!1,width:"41px",className:"acoes-table not-export-col",render:function(a,t,n){var r=e.colunaAcoes(a,t,n);return(0,o.A)(r)}};return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(t.responsivePriority=1e3),a.push(t),a}(j,e.isResponsivoComDetalhe));var N=m.DataTable(s.merge({ajax:O,columns:j,processing:!0,serverSide:!0,order:[[L,"asc"]],responsive:function(e){var a={details:{display:$.fn.dataTable.Responsive.display.childRowImmediate,type:"none",target:""}};return e&&(a={details:{type:"column"}}),a}(A),buttons:{buttons:T,dom:$.fn.dataTable.defaults.buttons.dom},paging:!1,drawCallback:e=>(f(u,D,y,e),x.forEach((a=>a(e)))),initComplete:function(a,t){var n,o;C.length>0&&($("#selColunasVisiveis .dropdown-menu").on("click",(e=>{e.stopImmediatePropagation();var a=e.target;if(D&&function(e){var a=$("#hdnSelColunasVisiveis"),t=a.val().split(","),[n,o,r]=["","",""],i=function(e){var a=e.getAttribute("data-value");return null==a&&(a=$(e).closest("a").attr("data-value")),a}(e);e.innerHTML.includes("done")?(n=t.filter((e=>e!==i)).join(","),[o,r]=["done","&nbsp;"]):(n=t+","+i,[o,r]=["&nbsp;","done"]),a.val(n),e.innerHTML=e.innerHTML.replace(o,r)}(a),I){var t=$(a).data("value"),n=$(a).find("span");n&&function(e,a){if(infraCookiesHabilitados()){var t=u+_,n=infraLerCookie(t);if(n){var o=JSON.parse(unescape(n));o[e]=a,infraCriarCookie(t,JSON.stringify(o))}}}(t,"done"===infraTrim(n.html()))}})),I&&function(){if(infraCookiesHabilitados()){var e=u+_;if(!infraLerCookie(e)){var a=Object.fromEntries(C.map((e=>{var a;return[e.data,null===(a=e.show)||void 0===a||a]})));infraCriarCookie(e,JSON.stringify(a))}}}(),n=document.querySelector("#selColunasVisiveis"),o=$("#hdnSelColunasVisiveis").val(),new MutationObserver((function(e){e.forEach((function(e){var a=$("#hdnSelColunasVisiveis").val();"attributes"!==e.type||n.classList.contains("show")||o===a||function(e){var a=C.filter((a=>a.data&&e.filter((e=>e===a.data)).length>0));r.columns=a,N.table().destroy(!1),m.html(""),DataTableHelper.build(r)}((o=a).split(","))}))})).observe(n,{attributes:!0})),function(a,t){var n=$("#".concat(a)).DataTable();n.on("draw",(()=>{R(S(e.tableId))})),y&&($("#"+a+" .dataTables_empty").html(t.oLanguage.sNotInitializedEmptyTable),$("#"+a+"_wrapper .dataTables_info").html(t.oLanguage.sNotInitializedInfoEmpty),$("#"+a+"_length").hide(),$("#"+a+"_wrapper .dataTables_paginate").hide(),n.on("preXhr",((e,t,n)=>{D=!0,r.deferLoading=!1,$("#"+a+"_length").show(),$("#"+a+"_wrapper .dataTables_paginate").show()}))),$("body").on("click","#".concat(e.tableId,' input[name="chkTodos"]'),(function(){$(this).closest("table").find('input[name^="chkRow"]').prop("checked",this.checked);var a=S(e.tableId);h(a),R(a)})),m.on("change",'[class="chkRowDataTable"]',(function(){var a=S(e.tableId);h(a),R(a)}))}(u,a),p(u,e),f(u,D,y,a),w(a,t)}},g));function S(e){return $("#"+e+' [class="chkRowDataTable"]:checked').map((function(){return $("#"+e).dataTable().api().row(this.parentElement.parentElement).data()})).toArray()}function R(a){var t=$("#".concat(e.tableId,"-acoes-wrapper")),n=$("#".concat(e.tableId,"_wrapper .btn-acoes-wrapper"));a.length?(t.addClass("d-flex"),n.addClass("d-flex")):(t.removeClass("d-flex"),n.removeClass("d-flex"))}$.fn.dataTable.Api.register("rows().getSelected()",(function(){return S(this.table().node().id)})),$.fn.dataTable.Api.register("formSearch()",(function(e){var a=new URLSearchParams(e);this.search(a).draw()})),$.fn.dataTable.Api.register("rows().getSelectedData()",(function(e){return S(this.table().node().id).map((function(a){if(Array.isArray(e))return s.pick(a,e);if(!a.hasOwnProperty(e))throw"Chave '"+e+"' não encontrado na linha selecionada";return a[e]}))}))},buildClientSideWithServerData:function(e){var a=e.tableId,t=$("#"+a),n=e.otherDTAttributes||{},{initComplete:o}=n,i=l(n,r),s=o||c,d=e.columns?e.columns:[],u=!0;return i.deferLoading,t.DataTable({columns:d,processing:!0,serverSide:!1,buttons:{buttons:e.buttons,dom:$.fn.dataTable.defaults.buttons.dom},paging:!1,drawCallback:t=>(f(a,u,i.deferLoading,t),e.drawCallbacks.forEach((e=>e(t)))),initComplete:function(t,n){p(a,e),f(a,u,i.deferLoading,t),s(t,n)}})},ACTION_TYPES:n.A}},21588:(e,a,t)=>{t.d(a,{A:()=>n});const n={NORMAL:"N",POPUP:"P",AJAX:"A",ONCLICK:"O",ICONE:"I",NOVAJANELA:"NJ"}},15894:(e,a,t)=>{t.d(a,{A:()=>i});var n=t(2543),o=t(21588);const r=function(e){let a;if(!(e=>void 0!==e.url&&null!==e.url&&""!==e.url&&void 0!==e.class&&null!==e.class&&void 0!==e.label&&null!==e.label)(e))return{iconButton:()=>"",dropdownItem:()=>""};const t=e=>n.map(e,((e,a)=>`${a}="${e}"`)).join(" "),r=(e,a)=>{const n=t(a);return`<a class="${e.class}"\n            ${e.strTooltip}\n            ${n}>${l}</a>`},i=(e,a,n)=>{const o=t(n),r=e?"action-dropdown-item-extra":"action-dropdown-item-mobile";return`<a role="presentation"\n            class="${a.class} dropdown-item pl-2 ${r}"\n            ${o}\n            ${s}>${l}${a.label}</a>`},l=1==e.MD?'<i class="material-icons text-primary">'+e.icon+"</i>":'<img src="'+e.icon+'" alt="'+e.label+'" class="infraImg">',s=e.strTooltip;switch(e.tipo){case o.A.POPUP:return a=[e,{href:`javascript: exibirSubFrm('${e.url}', ${e.width}, ${e.height})`}],{iconButton:()=>r(...a),dropdownItem:e=>i(e,...a)};case o.A.ICONE:return a=[e,{href:"javascript:void(0)"}],{iconButton:()=>r(...a),dropdownItem:e=>i(e,...a)};case o.A.ONCLICK:return a=[e,{href:"javascript:void(0)",onclick:`executarAcao('${e.acao}', '${e.url}', this.closest('tr'));`}],{iconButton:()=>r(...a),dropdownItem:e=>i(e,...a)};case o.A.NORMAL:return a=[e,{href:e.url}],{iconButton:()=>r(...a),dropdownItem:e=>i(e,...a)};case o.A.AJAX:let t={href:"javascript:void(0)",id:e.id,name:e.name,urlajax:e.url};return $.each(e.data,((e,a)=>{t[`data-${e}`]=a})),$.each(e.data,((e,a)=>{t[e]=a})),a=[e,t],{iconButton:()=>r(...a),dropdownItem:e=>i(e,...a)};case o.A.NOVAJANELA:return a=[e,{target:"_blank",href:e.url}],{iconButton:()=>r(...a),dropdownItem:e=>i(e,...a)};default:return a=[e,{href:e.url}],{iconButton:()=>r(...a),dropdownItem:e=>i(e,...a)}}};function i(e,a,t){let n,o,i=0;if(e.length<=5)n=e.slice(0,5),o=[];else{let a=0;e.forEach((e=>{void 0!==e.url&&null!==e.url&&""!==e.url&&void 0!==e.class&&null!==e.class&&void 0!==e.label&&null!==e.label&&a++,a<5&&i++})),n=e.slice(0,i),o=e.slice(i)}const l=e.length<5||i===e.length?"d-md-none":"",s=e;e.forEach((e=>{if(""!==e){let a="";""!==e.title&&"undefined"!==e.title&&(a="onmouseover=\"return infraTooltipMostrar('"+e.title+"','');\" onmouseout=\"return infraTooltipOcultar();\""),e.strTooltip=a}}));const c=n.map((e=>r(e).iconButton())).join(""),d=o.map((e=>r(e).dropdownItem(!0))).join(""),u=s.map((e=>r(e).dropdownItem(!1))).join("");return`\n        <span class="container-acoes-table">\n            <span class="container-acoes-table__desktop">\n                ${c}\n            </span>\n            <span class="container-acoes-table__extra dropleft ${l}">\n                <a class="acoes-trigger-mobile shadow-sm bg-primary" title="Mais ações" data-toggle="dropdown" aria-haspopup="true" href="#">\n                    <i class="material-icons icon-aligned text-white">more_horiz</i>\n                </a>               \n                \n                ${o.length?'\n        <a class="acoes-trigger-extra" title="Mais ações" data-toggle="dropdown" aria-haspopup="true" href="#">\n            <i class="material-icons text-primary">more_vert</i> \n        </a>':""}\n                \n                <div role="menu" class="dropdown-menu" style="position:relative">\n                    ${d}\n                    ${u}\n                </div>\n            </span>\n        </span>\n    `}}}]);
//# sourceMappingURL=4312.2dc563324727b497bab2.js.map